HEA 主体框架说明

本节详细介绍混合进化算法 (Hybrid Evolutionary Algorithm, HEA) 的主体框架，包括遗传算法流程及“移除-重插”局部搜索策略的融合。HEA 综合利用全局进化搜索和局部搜索，提高求解质量和效率。

HEA 与遗传算法概述

HEA 框架以经典**遗传算法 (Genetic Algorithm, GA)为基础，引入了局部搜索进行解优化。其主要特点是在每一代进化过程中，对候选解应用问题相关的破坏-重建操作，形成“进化 + 局部优化”**的策略。

种群初始化：HEA开始时生成一个解的种群，通常包含若干随机可行解。每个个体代表问题的一个可行解方案。

适应度评估：定义目标函数作为适应度，例如对于路径优化问题可使用总路线长度或总延误时间等衡量解的优劣。初始化后计算每个个体的适应度，用于指导选择操作。

选择 (Selection)：在每一代迭代中，根据适应度从当前种群选择父代个体。高适应度（解质量好）的个体被选择为父代的概率更高，以传承有利特征。常用方法有轮盘赌选择、锦标赛选择等。

交叉 (Crossover)：将选择的父代解对进行交叉组合，产生新的子代解。交叉运算尝试将两组解的部分路线或排程进行交换融合，以创造新的解结构。例如在路径问题中，可交换部分路线段。在不违反约束的前提下，交叉有助于探索新的解空间组合。

变异 (Mutation)：对子代解随机应用微小的变动，以维持种群多样性。比如随机调整解中任务的服务顺序或分配。变异概率一般较小，但对于避免局部最优陷阱很有帮助。

继承与替换：产生的子代解经过评估后，与当前种群合并。根据预定策略决定哪些个体进入下一代（例如精英保留策略保留最佳父代，其余用子代替换）。从而开始下一代进化。

上述过程持续迭代，直到达到停止条件（预设的代数上限、时间上限或目标达到阈值）。

融合局部搜索的进化流程

与传统GA不同，HEA在每次产生新解后都会融合局部搜索优化：

在交叉/变异产生子代解后，触发移除-重插局部优化：调用移除策略从子代解中删除一组选定的任务（具体任务由当前策略决定，如随机、Shaw或DRL智能选择）。这相当于对解进行“破坏”操作，打破其局部结构。

随后，调用修复策略将之前移除的任务重新插入解中适当位置，即完成“重建”操作。修复采用启发式方法，以尽量减少因重新插入带来的成本增量，保持解的高质量。

经过移除和重插，子代解可能得到改进（例如更短的路径或更少的延迟），因为破坏操作为重新优化部分子结构提供了机会。

HEA将优化后的子代解作为最终新解，与原始子代相比质量更优或相当，然后再进行适应度评估、精英保留等操作。

这个融合步骤使算法具备**“局部深挖能力”**：GA提供全局搜索多样性，而局部搜索保证每代解被尽量优化。
link.springer.com
研究表明，移除相似客户并重新安插往往能产生更优解，此算法正利用该思想提升性能。

HEA 框架流程示意

综合上述，全流程可以用伪代码描述如下：

初始化种群 P (大小为N)
评估 P 中每个个体适应度
代代 = 1
循环直到 达到最大代数 或 满足其他终止条件:
    选择父集合 M <- 从 P 中根据适应度选择
    子集合 C <- 对 M 中个体两两交叉得到
    对 C 中每个个体:
        随机概率执行变异
        调用 移除策略.remove(个体, k) 删除k个任务
        调用 修复策略.reinsert(个体) 将被删任务重插入
    评估 C 中每个个体适应度
    P <- 基于 P ∪ C 按策略生成新的种群 (例如保留最佳N个个体)
    代代 += 1
输出 P 中最优解及其适应度


其中 k 为移除任务数量，可为固定值或动态值，由配置决定。每代都在新个体上应用移除/修复操作，使其成为一种强化的“变异”或局部优化算子。

参数与终止条件

HEA 相关的重要参数包括：

种群规模：初始和维持的种群个体数量 (N)。

最大代数：迭代停止的代数上限，确保算法在有限时间内结束。

交叉概率/变异概率：控制交叉和变异操作的频率（若采用这些算子）。

移除数量 k：每次局部搜索要移除的任务数，可固定为某值或一个范围内随机选取。该值在问题规模较大时可能增大，以提供足够的扰动。

终止条件：除了代数上限，可选条件包括：解质量停滞（多代无改进）、达到时间限制等。

这些参数均可在配置文件中调整，以适应不同规模的问题和实验需求。在实际执行中，可根据经验或通过初步试验选取合理参数，如种群规模和代数上限往往随问题规模增长。

输出与性能指标

HEA 在结束时会输出迭代过程中收集的性能指标：

最佳解及目标值：最终找到的最优解方案和对应的目标函数值（如总成本）。

收敛曲线：记录每代最好适应度值随代数变化情况，可绘制曲线观察收敛速度。

运行时间：总运行耗时，以及各组成部分的耗时统计（详见 Timing.md），用于评估算法效率。

解统计：可能包括最终解的细节（如路线安排、车辆数等）以及实验条件说明，方便结果复现。

通过上述信息，用户可以判断算法性能（相较其他策略的优劣、收敛效率等）。HEA 框架凭借融合局部搜索，预期能较纯GA取得质量更好的解，同时保留较好的计算效率。