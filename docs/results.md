实验结果输出与日志结构

本节描述各实验运行所得结果文件的组织方式、文件内容含义，以及如何利用这些结果文件进行分析。了解输出结构有助于快速定位关键数据和绘制报告所需图表。

结果目录结构

所有实验运行产生的结果默认存放在 results/ 目录下，每个实验（或配置）一个子目录，命名通常与配置文件名或实验编号对应。例如：

results/
├─ E1_random/        # 实验E1输出
│   ├─ E1.log        # 日志文件：详细记录运行过程
│   ├─ convergence.png   # (可选) 收敛曲线图表
│   └─ solution.json     # (可选) 最佳解方案
├─ E2_shaw/          # 实验E2输出
│   ├─ E2.log
│   ├─ convergence.png
│   └─ solution.json
├─ E3_drl/           # 实验E3输出
│   ├─ E3.log
│   ├─ convergence.png
│   ├─ solution.json
│   └─ comparison.png   # (可选) 策略比较图，如有生成
├─ E4_shaw_large/    # 实验E4 Shaw输出 (大规模)
│   └─ ... (类似文件)
├─ E4_drl_large/     # 实验E4 DRL输出
│   └─ ... (类似文件)
└─ E5_train/         # 实验E5输出 (训练)
    ├─ train.log
    ├─ training_curve.png
    └─ drl_model.pth   # 训练生成的模型文件拷贝一份（主模型也保存在models目录）


注: 以上为示例，具体目录名称和文件可能略有差异，请以实际运行输出为准。默认情况下，配置文件中 logging.output_dir 字段决定了输出目录名称。

日志文件 (.log)

日志文件是理解算法过程和结果的主要来源，通常为文本文件，内容包括：

运行参数摘要：在开头列出本次运行的重要配置（问题规模、策略类型、参数值等），方便回溯实验条件。

迭代过程记录：每代或每隔若干代输出当前最优目标值、平均值等。例如:

Gen 1: best=1234.5, avg=1300.7
Gen 2: best=1200.3, avg=1250.1
...


这部分可用于绘制收敛曲线。

时间计时记录：关于各部分耗时的日志（详见 Timing.md）。通常标记为 [Time] 前缀的行，例如上一节提到的:

[Time] Generation 50: ... TotalGen=0.030s
...
[Time] Total runtime: 5.67s (GA:4.5s, DRL_infer:1.0s, Repair:0.17s)


从中提取不同策略的运行效率数据。

最终结果摘要：在算法结束时，日志会输出最终最优解的目标值、约束情况（如是否满足所有约束）等。例如:

Best solution cost = 1180.4, routes = 5, total delay = 0


还有可能列出每辆车的路线或每条调度的任务序列摘要。这些信息供用户验证解合理性或用于展示。

DRL训练日志 (仅E5)：会记录每个训练迭代的指标。格式可能为:

Episode 100: avg_reward= -50.3, success_rate=60%
...
Episode 10000: avg_reward= -10.2, success_rate=95%
Training completed in 3600s


这为绘制训练曲线和了解训练进展提供数据。

日志文件通常比较长，但信息丰富。建议使用文本编辑器搜索关键字（如 "Total runtime", "Best solution" 等）快速跳转定位。

图表文件 (.png 等)

根据配置和实现，不同实验会生成一些图表，以便更直观地分析结果：

convergence.png：每个求解实验(E1–E4)通常输出的收敛曲线图。横轴为迭代代数，纵轴为当前最优目标值。曲线下降趋于平稳表明算法收敛。通过比较不同策略的曲线，可以看出哪种策略收敛更快或达到更优的终值。

training_curve.png：E5训练实验输出的学习曲线图。横轴为训练迭代次数，纵轴为奖励或成本值。曲线逐渐上升(奖励)或下降(成本)表示策略在改进。如果有多条曲线（如训练集与验证集），可分别用不同颜色。

comparison.png：某些实验可能生成比较不同策略的柱状图或折线图。例如在E3输出中，可能包含将E1/E2/E3最终结果或耗时对比的图。如果未自动生成，可通过提供的数据自行绘制。

time_breakdown.png：如果实现了绘制耗时占比图，将会有类似图表显示各部分耗时比例，对应 Timing.md 的数据。这可用于在报告中展示例如“DRL策略将X%时间花在推理上，Y%花在GA等”。

所有图表文件均可在相应实验目录找到。文件命名力求自明，如图表标题内通常也会标注实验条件（策略、规模等）。如果需要更高分辨率或特定格式，可以修改绘图代码后重新生成。

解方案文件 (solution.json / .txt)

若配置开启 save_solution, 程序会将最终最优解的详细方案保存：

格式可能是 JSON 或人类可读文本。以车辆路径问题为例，JSON格式可能包含每条路线的节点序列、总距离，每辆车的载荷利用等信息。

文本格式则可能逐行列出每辆车的路径，例如:

Route 1: 0 -> 5 -> 3 -> 0  (distance=120.5, load=30)
Route 2: 0 -> 2 -> 8 -> 7 -> 0  (distance=98.3, load=25)
...


其中0通常代表仓库/起点。

这些文件用于验证算法解输出正确性以及提供案例分析。如果发现解不满足某些约束（比如车辆容量超出），可以据此排查算法问题。

对于训练实验E5，最终并无“解方案”，因此通常不产生solution文件，而是直接关注模型和曲线。

数据分析与后处理

有了上述文件，用户可进行进一步的数据处理：

- 若需直接获得 README 中列出的五类统计材料，可运行 `python analysis/experiment_suite.py`。脚本会自动生成代表性实例，运行 Exact、构造式启发式、GA/MA/ACO 以及 HEA-DRL，并在 `results/analysis/` 下输出性能对比表、显著性检验、anytime 曲线、迁移与运行时间拆解图。

使用脚本提取日志中的关键值汇总到表格。例如从每个 .log 提取“Best solution cost”和“Total runtime”，汇总得到表1比较不同策略性能。

将 .log 中每代最优值列出，可在Excel或Python中绘制更定制化的曲线。例如比较多条策略曲线在一张图上。

检查 solution 文件了解解结构差异，例如Shaw策略和DRL策略最终解在路线安排上的不同，从而获得定性分析（DRL可能倾向于不同的任务组合）。

验证 constraint：如检查solution是否有时间窗违反或其他不合理。若有，日志通常也会记录罚分或违规信息，可一并检查。

本框架鼓励用户利用结果数据充分分析。例如，可以统计多次随机实验的平均结果提升，将其纳入报告。由于支持设定随机种子，可重复实验以获取稳健的统计结果。

注意事项

结果 reproducibility：确保使用相同配置（尤其随机种子）运行不同策略实验，以保证比较公平。如果出现结果异常差异，确认实例是否一致或需要多次试验平均。

文件保存：results/ 目录下的文件会随着每次运行更新，建议将重要结果另行备份，或每次运行修改输出目录名称避免覆盖。

日志级别：如发现日志过长且难找信息，可将log级别调为INFO甚至WARNING，减少每代输出频率，只关注关键结果。

错误日志：如果算法过程中出现错误，中断时也会在日志记录traceback，需根据错误信息调试代码或修正配置。

通过对结果文件的组织描述和解读指导，用户可以轻松定位实验输出并提取所需信息，为实验报告撰写和算法性能评估提供坚实基础。若在分析过程中对某部分结果含义不确定，请参考相关文档章节（如时间数据对应 Timing.md，DRL曲线对应 DRL_Module.md 中训练说明等）获得上下文解释。祝您实验顺利，数据丰富！