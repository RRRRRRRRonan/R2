数据生成与配置结构

本节说明实验所需的数据准备和配置文件结构。包括如何生成或提供问题实例数据，以及如何通过配置文件设置算法参数、策略选项等。清晰的配置使实验流程标准化，便于复现每组实验结果。

问题数据与实例生成

本项目针对的优化问题需要一定的输入数据（例如车辆路径问题需要客户位置、需求等）。数据模块负责提供这些问题实例。主要方式有：

随机生成合成数据：通过算法随机生成一定规模的实例。可以设置参数如任务数量、位置分布、时间窗范围、车辆容量等。程序会在运行时根据配置执行生成。例如，可以生成50个订单的配送问题，坐标在100x100区域均匀分布，每个订单有随机需求和时间窗。

使用预定义数据集：对于标准基准测试，可将已有数据文件放入 data/instances/ 目录，并在配置文件中提供路径。本框架支持读取特定格式的数据文件（如CSV、JSON等），将其实例化为内部数据对象供算法使用。

实例结构：无论来源如何，每个实例一般包含:

任务/客户列表：每个任务包含属性，如地点坐标 (x,y)、需求量、时间窗 [e_i, l_i]（如果有时间窗口约束）、执行时长等。可能成对出现（如取送任务的pickup和delivery）。

资源/车辆信息：如车辆数量、容量 Q，每辆车的其他限制（时间、里程或能量限制）。

距离/时间矩阵：任务之间的距离或行驶时间，如果需要可预计算并提供，加速算法评估。

以上数据通常保存在程序内存的结构体中 (例如列表或自定义类)，供算法读取。

随机种子：为保证结果复现，可在配置中设置随机种子 random_seed 以固定随机生成的数据。这样每次运行相同配置可得到一致的数据集，从而使不同策略的结果具有可比性。

数据规模与类别

实验将针对不同规模的数据进行。配置文件允许指定任务数量等参数。例如，E1–E3 可能使用中小规模实例（如20–50任务），E4 实验使用大规模实例（如100+任务）以测试算法扩展性。用户也可通过配置调整这些参数，轻松更改实验规模。

若问题有不同类别（如完全随机分布 vs. 聚类分布），可通过不同数据生成模式来体现。例如配置 distribution: "clustered" 或 "uniform" 来控制生成方式。这有助于测试算法在不同数据分布下的表现。

配置文件结构

每组实验均由一个 YAML/JSON 配置文件定义。配置文件结构层次清晰，涵盖问题参数和算法参数两大部分。以下以 YAML 格式为例说明主要字段：

# 示例配置文件 E?.yaml 结构
problem:
  instance_type: "random"            # 实例来源: random 表示随机生成, 或 dataset
  num_tasks: 50                      # 任务数量 (若随机生成)
  distribution: "uniform"            # 任务分布类型 (uniform均匀或cluster簇状等)
  time_windows: true                 # 是否生成时间窗约束
  seed: 42                           # 随机种子保证可复现
  
  # 如使用外部数据集:
  data_file: "data/instances/instance_50.json"
  # data_file_format: "json"         # 文件格式 (可选)
  
algorithm:
  removal_strategy: "shaw"           # 移除策略选择: random, shaw, drl 三选一
  remove_count: 10                   # 每次移除任务数 (可调整或给定范围)
  population_size: 50                # 遗传算法种群规模
  generations: 1000                  # 最大迭代代数
  crossover_rate: 0.8                # 交叉概率
  mutation_rate: 0.2                 # 变异概率
  elite_rate: 0.05                   # 精英保留比例 (如适用)
  
  # DRL相关参数 (仅当 removal_strategy=drl 时需要):
  model_path: "models/drl_model.pth" # 预训练模型路径
  use_gpu: true                      # 是否使用GPU加速DRL推理
  # train_mode: false                # 是否训练模式 (某些配置用于训练脚本)
  
logging:
  log_level: "INFO"                  # 日志详细程度: DEBUG/INFO/WARN
  output_dir: "results/E3"           # 输出结果目录
  save_solution: true                # 是否保存最终解方案到文件


以上字段解释：

problem 部分：定义实例生成或读取方式。如使用随机生成，指定任务数量、分布类型等；使用现有数据集，则提供文件路径。时间窗、车辆等参数也在此配置。

algorithm 部分：定义算法参数及所用策略。removal_strategy 为关键开关，选择不同移除算子。remove_count 可设具体值或范围（实现中如填单值表示固定移除数，如填 "5-15" 则表示在5到15间随机选取）。遗传算法参数如种群大小、代数在此配置，可视需求调整。DRL策略需要提供模型文件路径等附加信息。

logging 部分：控制日志与输出选项。output_dir 指定该实验运行结果存放的目录（通常以实验编号命名），方便不同实验分离管理。可以选择保存最终解方案（格式例如JSON或文本）以供事后分析。

配置文件采用自解释的键名，便于修改和阅读。不同实验（E1–E5）主要通过配置差异来体现比较点，如：

E1 与 E2 仅 removal_strategy 不同（random vs shaw）。

E3 切换为 drl 且提供模型。

E4 可能增大 num_tasks 或调整其他参数来测试性能。

E5 用于训练时，则会在算法部分设置 train_mode: true 或使用专门的训练配置文件，包括训练轮数、学习率等（此时一些求解参数如种群等可不需要）。

配置示例与管理

在 configs/ 目录下提供了各实验的配置文件：

E1.yaml：随机移除策略实验的配置

E2.yaml：Shaw移除策略实验的配置

E3.yaml：DRL移除策略实验的配置（使用预训练模型）

E4.yaml：扩展实例规模或其他变量的实验配置

E5.yaml 或 train_DRL.yaml：DRL策略训练实验的配置

用户可以根据示例配置文件编写新的配置，以开展额外实验。例如，想测试移除数量对效果的影响，可以复制一份配置并修改 remove_count 进行运行。

配置管理建议使用清晰的命名和目录组织，以避免混淆。当前将不同实验配置以文件名区分，并在配置中自带输出目录设置，确保不同实验输出不会互相覆盖。此外，每次运行时程序会在日志开头打印所用的配置内容摘要，帮助记录实验条件。

通过完善的数据与配置设计，本地实验可以方便地一键复现或调整参数进行扩展试验。无须修改代码，只需修改配置，即可尝试各种情形，大大提高了实验效率和可靠性。